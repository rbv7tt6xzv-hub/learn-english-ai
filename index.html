<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Learn English AI</title>
  <style>
    body{margin:0;font-family:Arial,sans-serif;background:#0f172a;color:#fff;display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px}
    .card{width:100%;max-width:420px;background:#1e293b;border-radius:14px;padding:22px;box-shadow:0 10px 30px rgba(0,0,0,.35);text-align:center}
    h1{margin:0 0 8px}
    .muted{color:#94a3b8;line-height:1.35}
    .row{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
    button{flex:1;min-width:140px;padding:12px 14px;border:none;border-radius:10px;background:#22c55e;color:#04130a;font-weight:700;font-size:15px}
    button.secondary{background:#334155;color:#e2e8f0}
    input{width:100%;margin-top:12px;padding:12px;border-radius:10px;border:1px solid #334155;background:#0b1220;color:#fff;font-size:16px;outline:none}
    .chip{display:inline-block;background:#0b1220;border:1px solid #334155;border-radius:999px;padding:6px 10px;margin-top:10px;color:#cbd5e1;font-size:13px}
    .q{margin-top:14px;padding:12px;background:#0b1220;border:1px solid #334155;border-radius:12px;line-height:1.35;text-align:left}
    .spanish{color:#f1f5f9;font-size:18px;font-weight:700;margin:0}
    .hint{color:#94a3b8;margin:6px 0 0}
    #feedback{margin-top:12px;font-weight:700;line-height:1.35}
    .topbar{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;margin-top:10px}
    .progress{color:#cbd5e1;font-size:13px}
  </style>
</head>
<body>
  <div class="card">
    <h1>Learn English AI üá∫üá∏</h1>
    <p class="muted" id="story">Loading story‚Ä¶</p>

    <div class="topbar">
      <span class="chip" id="teacherTag">Teacher</span>
      <span class="progress" id="progress">Lesson 1/1</span>
    </div>

    <div class="q">
      <p class="muted" style="margin:0 0 8px 0;">Say this in English:</p>
      <p class="spanish" id="spanishText">‚Ä¶</p>
      <p class="hint" id="hintText">‚Ä¶</p>
    </div>

    <div class="row">
      <button onclick="speak()">üîä Listen</button>
      <button class="secondary" onclick="showAnswer()">üëÄ Show answer</button>
    </div>

    <input id="answer" placeholder="Type the English sentence‚Ä¶" />

    <div class="row">
      <button onclick="check()">‚úÖ Check</button>
      <button class="secondary" onclick="nextLesson()">‚û°Ô∏è Next</button>
    </div>

    <div id="feedback"></div>
  </div>

  <script>
    const lessons = [
      {
        teacher: "Teacher Anna",
        story: "You just arrived in the United States. A friendly teacher meets you and starts a conversation.",
        spanish: "¬øDe d√≥nde eres?",
        answer: "Where are you from?",
        hint: "Tip: Start with ‚ÄúWhere‚Ä¶‚Äù",
        voice: { lang: "en-US", pitch: 1.15, rate: 0.95 }
      },
      {
        teacher: "Teacher Mike",
        story: "You walk into a coffee shop. The barista asks a common question.",
        spanish: "¬øQu√© deseas tomar?",
        answer: "What would you like to drink?",
        hint: "Tip: ‚ÄúWhat would you like‚Ä¶‚Äù is very common.",
        voice: { lang: "en-US", pitch: 0.9, rate: 0.95 }
      },
      {
        teacher: "Teacher Alex",
        story: "You meet someone new. They want to know your name.",
        spanish: "¬øC√≥mo te llamas?",
        answer: "What's your name?",
        hint: "Tip: Use What‚Äôs = What is",
        voice: { lang: "en-US", pitch: 1.0, rate: 1.0 }
      }
    ];

    let i = 0;

    function render() {
      const L = lessons[i];
      document.getElementById("teacherTag").innerText = "üßë‚Äçüè´ " + L.teacher;
      document.getElementById("story").innerText = L.story;
      document.getElementById("spanishText").innerText = L.spanish;
      document.getElementById("hintText").innerText = L.hint;
      document.getElementById("progress").innerText = `Lesson ${i+1}/${lessons.length}`;
      document.getElementById("answer").value = "";
      document.getElementById("feedback").innerText = "";
    }

    function normalize(s){
      return s.toLowerCase().replace(/[‚Äô']/g,"'").trim();
    }

    function speak() {
      const L = lessons[i];
      const u = new SpeechSynthesisUtterance(L.answer);
      u.lang = L.voice.lang;
      u.pitch = L.voice.pitch;
      u.rate = L.voice.rate;
      speechSynthesis.cancel();
      speechSynthesis.speak(u);
    }

    function showAnswer(){
      const L = lessons[i];
      document.getElementById("feedback").innerText = "‚úÖ Answer: " + L.answer;
    }

    function check() {
      const L = lessons[i];
      const user = normalize(document.getElementById("answer").value);
      const correct = normalize(L.answer);

      if (!user) {
        document.getElementById("feedback").innerText = "Type your answer first üôÇ";
        return;
      }

      document.getElementById("feedback").innerText =
        (user === correct)
          ? "‚úÖ Perfect! Continue the story ‚û°Ô∏è"
          : "‚ùå Not quite. Tap üîä Listen and try again.";
    }

    function nextLesson() {
      if (i < lessons.length - 1) {
        i++;
        render();
      } else {
        document.getElementById("story").innerText = "üéâ You finished the demo! Next step: add 20 lessons and a score system.";
        document.getElementById("spanishText").innerText = "¬°Buen trabajo!";
        document.getElementById("hintText").innerText = "Want more lessons? We can add them fast.";
        document.getElementById("feedback").innerText = "";
        document.getElementById("progress").innerText = `Done ‚úÖ`;
      }
    }

    render();
  </script>
</body>
</html>
